<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>KASPERIA — API Docs</title>
  <link rel="shortcut icon" href="./assets/favicon.ico" type="image/x-icon" />
  <link rel="stylesheet" href="./css/style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github-dark.min.css">
</head>

<body>
  <header>
    <div class="container nav">
      <a class="brand" href="index.html"><img src="./assets/logo.png" alt="Kasperia"><strong>KASPERIA</strong></a>
      <nav class="nav-links" id="navLinks">
        <a href="index.html" class="active">Home</a>
        <a href="./docs.html" class="">API Docs</a>
        <a href="https://chromewebstore.google.com/detail/kasperia/ffalcabgggegkejjlknofllbaledgcob?hl=zh-CN&utm_source=ext_sidebar" target="_blank" >Download</a>
        <span class="nav-underline"></span>
      </nav>
      <button class="menu-btn" aria-label="menu"
        onclick="document.getElementById('navLinks').classList.toggle('open')">☰</button>
    </div>
  </header>
  <main class="container pt28 mb20">
    <div class="docs">
      <nav>
        <strong>API Docs</strong>

        <a href="#wallet">Kasperia Wallet</a>
        <a href="#quickStart">Quick Start</a>

        <a href="#kaspa">Kaspa integration</a>
        <a href="#browser">Browser Detection</a>

        <a href="#integration">EVM integration</a>
        <a href="#provider">Get Provier</a>
        <a href="#eth_requestAccounts">eth_requestAccounts</a>
        <a href="#eth_accounts">eth_accounts</a>
        <a href="#eth_getBalance">eth_getBalance</a>
        <a href="#eth_chainId">eth_chainId</a>
        <a href="#eth_version">eth_version</a>
        <a href="#sendKaspa">sendKaspa</a>
        <a href="#wallet_switchEthereumChain">wallet_switchEthereumChain</a>

        <a href="#Events">Events</a>
        <a href="#accountsChanged">accountsChanged</a>
        <a href="#networkChanged">networkChanged</a>
      </nav>
      <article>
        <h1>Kaspa Wallet Integration (Kasperia)</h1>
        <p>This guide helps you integrate the <b>Kasperia</b> browser extension wallet with your web application. It
          follows popular wallet‑injection patterns and adopts the EIP‑6963 provider discovery standard for a smooth
          multi‑wallet experience. The examples are TypeScript‑friendly.</p>

        <h2 id="wallet">Kasperia Wallet</h2>
        <p>Kasperia Wallet is a non-custodial wallet. We never have access to your funds. Kasperia Wallet never stores your seed phrase, your password or any private information. Your accounts are derived from your Secret Recovery Phrase.</p>
        <ol>
          <li>Kasperia Wallet is a hierarchical deterministic wallet. Your accounts are derived from your Secret Recovery Phrase.</li>
          <li>Your private keys are encrypted on your device by your password and are never shared with anyone.</li>
          <li>Kasperia Wallet doesn't track any personal identifiable information, your account addresses, or asset balances.</li>
          <li>Use RPC/SDK to query balances and submit transactions.</li>
        </ol>
        <h2 id="quickStart">Quick Start</h2>
        <h6>chrome extension </h6>
        <p>Go to the <a href="https://chromewebstore.google.com/detail/kasperia/ffalcabgggegkejjlknofllbaledgcob?hl=zh-CN&utm_source=ext_sidebar"
          target="_blank">chrome extension</a> webstore and install Kasperia wallet extension.</p>


        <h2 id="kaspa">Kaspa integration</h2>
        <p>Welcome to Kasperia's integration documentation. This documentation is for learning to integrate Kasperia wallet with your applications. Please note : The integration API may be modified if relevant standards are officially released by kaspa core team one day in the future.</p>
        <h4>Getting Started</h4>
        <p>First of all, install Kasperia Wallet on your development machine. Once Kasperia Wallet is installed and running, you should find that new browser tabs have a window.kasperia object available in the developer console. This is how your website will interact with Kasperia Wallet.</p>
        <h4 id="browser">Browser Detection</h4>
        <p>To verify if the browser is running Kasperia Wallet, copy and paste the code snippet below in the developer console of your web browser:</p>
        <pre><button class="copy-btn">Copy</button><code class="language-js">if (typeof window.kasperia !== 'undefined') {
  console.log('kasperia Wallet is installed!');
}</code></pre>
        <p>You can review the full API for the window.kasperia object here.</p>
        <h2 id="integration">EVM integration</h2>
        <p class="mb10">In order to provide support for Kaspa-based layer2 networks, the kasperia wallet has integrated support for EVM networks. When utilizing the kasperia wallet, users can directly submit layer2 transactions to Kaspa. Consequently, this offers protection against MEV attacks, which is a distinct advantage compared to other wallets.</p>
        <p class="mb10">EVM web apps can interact with Kasperia wallet via the provider that is injected at window.Kasperia.ethereum. This provider conforms to the <a href="https://eips.ethereum.org/EIPS/eip-1193" target="_blank">EIP-1193</a> standard and is also injected at window.ethereum to support legacy integrations.</p>
        <p class="mb10">To detect if a user has already installed Kasperia wallet, a web application should check for the existence of a Kasperia object.
If a Kasperia object exists, EVM dApps can interact with Kasperia wallet via the API found at window.kasperia.ethereum. This ethereum provider is also made available at window.ethereum but is prone to namespace collisions from other injected wallets.</p>

        <h2 id="provider">Get Provider</h2>
        <p></p>
        <pre><button class="copy-btn">Copy</button><code class="language-js">function getProvider() {
  const providerList = []
  const handler = (event) => {
    if(!providerList.some(i => i.rdns === event.detail.info.rdns)) {
      providerList.push({ ...event.detail.info, provider: event.detail.provider })
    }
  }
  window.addEventListener("eip6963:announceProvider", handler);
  window.dispatchEvent(new Event("eip6963:requestProvider"));
  const kasperiaProvider = providerList.find(i => i.rdns === "io.kasperia.wallet")
  window.removeEventListener("eip6963:announceProvider", handler);
  return kasperiaProvider || null
}
const kasperia = await getProvider()
</code></pre>

        <h2 id="eth_requestAccounts">Eth_requestAccounts</h2>
        <pre><button class="copy-btn">Copy</button><code class="language-js">const accounts = await kasperia.provider.request({ method: "eth_requestAccounts" })</code></pre>
        <p>Connect the current account.</p>
        <h4>Parameters</h4>
        <p>none</p>
        <h4>Returns</h4>
        <p>Promise returns string[] : Address of current account.</p>
        <h4>Example</h4>
        <pre><button class="copy-btn">Copy</button><code class="language-js">try {
  let accounts = await await kasperia.provider.request({ method: "eth_requestAccounts" })
  console.log('connect success', accounts);
} catch (e) {
  console.log('connect failed');
}
> connect success ['0xAd0a0406fF27e4De7B7577e8e1877A8780f3E138']
</code></pre>

        <h2 id="eth_accounts">eth_accounts</h2>
        <pre><button class="copy-btn">Copy</button><code class="language-js">const accounts = await this.provider.request({ method: "eth_accounts" })</code></pre>
        <p>Get address of current account. It's also used to certify if the user is connected, which should be called first.</p>
        <h4>Parameters</h4>
        <p>none</p>
        <h4>Returns</h4>
        <p>Promise - string: address of current account</p>
        <h4>Example</h4>
        <pre><button class="copy-btn">Copy</button><code class="language-js">try {
  let accounts = await kasperia.provider.request({ method: "eth_accounts" })
  console.log('connect success', accounts);
} catch (e) {
  console.log('connect failed');
}
> connect success ['0xAd0a0406fF27e4De7B7577e8e1877A8780f3E138']</code></pre>

<h2 id="eth_getBalance">eth_getBalance</h2>
        <pre><button class="copy-btn">Copy</button><code class="language-js">const accounts = await this.provider.request({ method: "eth_getBalance" })</code></pre>
        <p>Get address of current account. It's also used to certify if the user is connected, which should be called first.</p>
        <h4>Parameters</h4>
        <pre><code class="language-js">params: [address, "latest"]</code></pre>
        <h4>Returns</h4>
        <p>Promise - string: the hexadecimal amount passed into the account</p>
        <h4>Example</h4>
        <pre><button class="copy-btn">Copy</button><code class="language-js">try {
  let balance = await kasperia.provider.request({ 
    method: "eth_getBalance", 
    params: [address, "latest"] })
  console.log('balance info', balance);
} catch (e) {
  console.log('balance failed');
}
> balance info 0x0</code></pre>

<h2 id="eth_chainId">eth_chainId</h2>
        <pre><button class="copy-btn">Copy</button><code class="language-js">const chainId = await this.provider.request({ method: "eth_chainId" })</code></pre>
        <p>Get address of current account. It's also used to certify if the user is connected, which should be called first.</p>
        <h4>Parameters</h4>
        <p>none</p>
        <h4>Returns</h4>
        <p>Promise - string:  the chainId in hexadecimal</p>
        <h4>Example</h4>
        <pre><button class="copy-btn">Copy</button><code class="language-js">try {
  let chainId = await kasperia.provider.request({   method: "eth_chainId" })
  console.log('chainId info', chainId);
} catch (e) {
  console.log('chainId failed');
}
> chainId info 0xcc</code></pre>

<h2 id="eth_version">eth_version</h2>
        <pre><button class="copy-btn">Copy</button><code class="language-js">const version = await this.provider.request({ method: "eth_version" })</code></pre>
        <p>Get address of current account. It's also used to certify if the user is connected, which should be called first.</p>
        <h4>Parameters</h4>
        <p>none</p>
        <h4>Returns</h4>
        <p>Promise - string:  the chainId in hexadecimal</p>
        <h4>Example</h4>
        <pre><button class="copy-btn">Copy</button><code class="language-js">try {
  let version = await kasperia.provider.request({method: "eth_version" })
  console.log('version info', version);
} catch (e) {
  console.log('version failed');
}
> version info 0xcc</code></pre>



      </article>
    </div>
  </main>

  <footer>
    <div class="container foot">
      <div class="left">
        <img src="./assets/logo.png" alt="logo">
        <div>KASPERIA · © <span id="year"></span></div>
      </div>
      <div class="social">
        <a href="https://github.com/jeanku/kasperia-extension" target="_blank" rel="noopener">
          <img src="./assets/github.svg" alt="github">
        </a>
        <a href="https://x.com/KasperiaWallet" target="_blank" rel="noopener">
          <img src="./assets/twitter.svg" alt="x">
        </a>
      </div>
    </div>
  </footer>
    <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/lib/highlight.min.js"></script>
    <script src="../js/main.js"></script>
  <script>document.getElementById('year').textContent = new Date().getFullYear();</script>

</body>

</html>